# Raspberry Pi ハードウェア要件（Wake Word × GPT × Googleカレンダー 音声アシスタント）

このドキュメントは、Wake Word × GPT × Googleカレンダー 音声アシスタントのうち、**Raspberry Pi 側のハードウェア構成・電源・オーディオ周り**に関する要件とメモを切り出したものです。

---

## 1. ターゲットデバイス

- 想定実行環境：
  - Raspberry Pi 4 または Raspberry Pi 5
  - OS：Raspberry Pi OS（Debian系）
- 補足：
  - 開発・デバッグ用としては PC / Mac 上でも同一ロジックを動かす。
  - ただし **常時稼働の本番運用ターゲットは Raspberry Pi を優先**する。

---

## 2. 電源・給電方式

### 2.1 公式推奨電源

- Raspberry Pi 4：
  - 5V / 3A クラスの USB-C 電源アダプタ
- Raspberry Pi 5：
  - 5V / 5A クラス（27W 相当）の USB-C 電源アダプタ

> v1 の正式運用要件としては、**コンセント給電（公式クラスの電源アダプタ）を基本**とする。

### 2.2 モバイルバッテリー運用（オプション）

- 条件を満たせばモバイルバッテリーからの給電も可能とするが、以下を満たすものを推奨：
  - 5V 出力で、必要電流（少なくとも 3A 程度）を安定供給できること。
  - 低電流時に「機器が接続されていない」と判定して自動電源OFFしないこと。
- 用途：
  - 持ち運びテスト・短時間のデモ用途など。
  - 24時間稼働の本番運用では、基本的にはコンセント給電を使用する。

### 2.3 PC の USB ポートからの給電

- PC の USB ポート（5V / 0.5～0.9A 程度）からの直接給電は **非推奨**。
  - 電流不足・電圧降下による不安定動作や低電圧警告の原因となる。
  - 要件として「本番構成では使用しない」方針とする。

---

## 3. オーディオ入出力（マイク・スピーカー）

### 3.1 マイク入力

- v1 の公式サポート：
  - **外付け USB マイク** を標準構成とする。
    - 一般的な USB コンデンサマイク
    - 会議用 USB スピーカーフォン（マイク＋スピーカー一体型） など
- 要件：
  - Raspberry Pi OS 上で ALSA / PulseAudio から録音デバイスとして認識できること。
  - サンプリングレートは、アプリ側で想定する値（例：16kHz or 48kHz）で問題なく取得できること。
- 将来的な拡張（v2 以降の候補）：
  - I2S 接続のマイクアレイ（例：ReSpeaker）による 360°集音・ビームフォーミング対応。

### 3.2 スピーカー出力

- 優先構成：
  - USB 給電式のアナログスピーカー（3.5mm ステレオプラグ接続）
  - もしくは USB オーディオデバイス一体型スピーカー
- 要件：
  - Raspberry Pi から標準のオーディオ出力（ALSA / PulseAudio）として利用できること。
  - 音声アシスタントのレスポンス音声が十分な音量・音質で再生できること。

### 3.3 Bluetooth オーディオ（ベストエフォート）

- Raspberry Pi 内蔵 Bluetooth を用いたスピーカー／ヘッドホン出力は **ベストエフォート対応** とする。
  - 例：AirPods Pro などの Bluetooth イヤホン／ヘッドホン。
- 方針：
  - 開発・検証フェーズでは、手持ちの Bluetooth デバイスで動作確認を行ってもよい。
  - ただし、接続安定性・遅延（レイテンシ）は環境依存のため、**本番運用の正式サポート対象とはしない**。
- 本番前提の構成：
  - 安定性を優先し、**USBマイク＋有線スピーカー** を基本構成とする。

---

## 4. 想定する初期検証フロー（ハードウェア側）

1. Raspberry Pi 本体に Raspberry Pi OS をセットアップ。
2. 公式または同等クラスの USB-C 電源で起動確認。
3. 手持ちの Bluetooth イヤホン（例：AirPods Pro）をペアリングし、
   - 一度、音声の入出力テストを行う（あくまで動作確認）。
4. その後、USB マイク＋スピーカーを接続し、
   - `arecord` / `aplay` などで録音・再生テスト。
5. 問題なく音が扱えることを確認したうえで、
   - Wake Word（Porcupine）
   - Realtime API 音声入出力
   - 無言タイムアウト処理
   を順次組み込んでいく。

---

## 5. 今後の拡張の余地

- Raspberry Pi 5 の PCIe 経由で NVMe SSD を追加し、ログ保存やキャッシュ、ローカルモデルの展開を高速化する。
- マイクアレイ導入による、音源方向推定・ビームフォーミング対応。
- UPS HAT や専用バッテリー基板による、停電耐性・安全なシャットダウン機構の追加。

---

※ このドキュメントは「ハードウェア前提条件」をまとめたものであり、
　アプリケーションロジック（Wake Word処理・Realtime API連携・Googleカレンダー連携等）については
　別Canvasの要件定義ドキュメントを参照する。